Lo que hicimos para integrar WebPay a nuestra Entrega 2 fue agregar a el controller de la creacion de orden de compra la función para pegarle a la API de transbank para crear una transacción y que nos devuelva el link y token necesarios.
Este token lo guardamos en la orden a través del deposit_token ya creado y lo enviamos al frontend para que pueda ser enviado a la ruta de transbank de manera oculta. También al crear la transacción le pasamos la ruta de frontend de una nueva vista que servirá para entregar la información de validación de compra al usuario.
Luego creamos un nuevo endpoint de API que sirve para que la nueva vista del frontend pueda desplegar la información de la validación. Esto lo hace através de la función commit de transbank-sdk y funciona pegandole a una API de transbank que nos entrega response_code = 0, de ser exitoso.